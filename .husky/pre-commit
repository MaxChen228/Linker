echo "ğŸ¨ Running stylelint on CSS files..."

# Get staged CSS files
STAGED_CSS_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(css)$' | tr '\n' ' ')

if [ -z "$STAGED_CSS_FILES" ]; then
    echo "âœ… No CSS files to lint"
    exit 0
fi

echo "ğŸ“ Checking files: $STAGED_CSS_FILES"

# Run stylelint on staged files only
npx stylelint $STAGED_CSS_FILES

STYLELINT_EXIT_CODE=$?

if [ $STYLELINT_EXIT_CODE -ne 0 ]; then
    echo ""
    echo "âŒ Stylelint found errors in your CSS files!"
    echo "ğŸ’¡ To fix automatically, run: npm run lint:css"
    echo "ğŸ”§ To check without fixing: npm run lint:css:check"
    echo ""
    echo "Commit aborted. Please fix the issues and try again."
    exit 1
fi

echo "âœ… All CSS files pass stylelint checks!"
exit 0