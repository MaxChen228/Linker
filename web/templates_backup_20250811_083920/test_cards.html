{% extends "base.html" %}

{% block title %}測試卡片系統 - Linker{% endblock %}

{% block styles %}
<style>
  .test-section {
    margin: 40px 0;
    padding: 20px 0;
    border-bottom: 2px solid var(--border);
  }
  
  .test-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 24px;
    color: var(--text);
  }
  
  .test-subtitle {
    font-size: 1rem;
    font-weight: 500;
    margin: 20px 0 16px;
    color: var(--text-muted);
  }
</style>
{% endblock %}

{% block content %}
<div class="container">
  <h1 style="text-align: center; margin: 40px 0;">統一卡片系統測試頁</h1>
  
  <!-- 基礎卡片 -->
  <section class="test-section">
    <h2 class="test-title">基礎卡片變體</h2>
    
    <div class="cards-grid">
      <!-- 預設卡片 -->
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">預設卡片</h3>
        </div>
        <div class="card-body">
          <p>這是一個基礎卡片，使用預設樣式。包含標題和內容區域。</p>
        </div>
      </div>
      
      <!-- 可互動卡片 -->
      <div class="card" data-interactive="true">
        <div class="card-header">
          <h3 class="card-title">可互動卡片</h3>
        </div>
        <div class="card-body">
          <p>hover 時會有提升效果和陰影變化。適合用於可點擊的卡片。</p>
        </div>
      </div>
      
      <!-- Glass Morphism 卡片 -->
      <div class="card" data-glass="true">
        <div class="card-header">
          <h3 class="card-title">玻璃擬態卡片</h3>
        </div>
        <div class="card-body">
          <p>使用毛玻璃效果，半透明背景搭配模糊效果。</p>
        </div>
      </div>
      
      <!-- 裝飾線卡片 -->
      <div class="card" data-decorated="true" data-interactive="true">
        <div class="card-header">
          <h3 class="card-title">裝飾線卡片</h3>
        </div>
        <div class="card-body">
          <p>hover 時頂部會出現漸變裝飾線，增加視覺焦點。</p>
        </div>
      </div>
    </div>
  </section>
  
  <!-- 類型變體 -->
  <section class="test-section">
    <h2 class="test-title">卡片類型變體</h2>
    
    <div class="cards-grid">
      <!-- 問題卡片 -->
      <div class="card" data-type="question">
        <div class="card-header">
          <h3 class="card-title">問題卡片</h3>
        </div>
        <div class="card-body">
          <p>用於練習頁面的題目展示，白色背景搭配細微陰影。</p>
        </div>
      </div>
      
      <!-- 知識點卡片 -->
      <div class="card" data-type="knowledge" data-interactive="true" data-decorated="true">
        <div class="card-header">
          <h3 class="card-title">知識點卡片</h3>
        </div>
        <div class="card-body">
          <p>用於展示錯誤知識點，支援互動和裝飾效果。</p>
        </div>
      </div>
      
      <!-- 文法卡片 -->
      <div class="card" data-type="pattern" data-interactive="true">
        <div class="card-header">
          <h3 class="card-title">文法句型卡片</h3>
        </div>
        <div class="card-body">
          <p>用於文法句型頁面，hover 有提升效果。</p>
        </div>
      </div>
      
      <!-- 實例卡片 -->
      <div class="card" data-type="instance" data-size="sm">
        <div class="card-header">
          <h3 class="card-title">實例卡片</h3>
        </div>
        <div class="card-body">
          <p>較小的卡片，用於群組內的實例展示。</p>
        </div>
      </div>
    </div>
  </section>
  
  <!-- 掌握度變體 -->
  <section class="test-section">
    <h2 class="test-title">掌握度狀態</h2>
    
    <div class="cards-grid">
      <!-- 低掌握度 -->
      <div class="card" data-type="knowledge" data-mastery="low" data-interactive="true">
        <div class="card-header">
          <h3 class="card-title">低掌握度（< 30%）</h3>
          <div class="mastery-indicator">
            <div class="mastery-circle">
              <svg width="48" height="48">
                <circle cx="24" cy="24" r="20" stroke="#e5e7eb" stroke-width="3" fill="none" />
                <circle cx="24" cy="24" r="20" stroke="#ef4444" stroke-width="3" fill="none"
                        stroke-dasharray="25 125" />
              </svg>
              <span class="mastery-percent">20%</span>
            </div>
          </div>
        </div>
        <div class="card-body">
          <p>紅色邊框和背景漸變，表示需要重點複習。</p>
        </div>
      </div>
      
      <!-- 中掌握度 -->
      <div class="card" data-type="knowledge" data-mastery="medium" data-interactive="true">
        <div class="card-header">
          <h3 class="card-title">中掌握度（30-70%）</h3>
          <div class="mastery-indicator">
            <div class="mastery-circle">
              <svg width="48" height="48">
                <circle cx="24" cy="24" r="20" stroke="#e5e7eb" stroke-width="3" fill="none" />
                <circle cx="24" cy="24" r="20" stroke="#f59e0b" stroke-width="3" fill="none"
                        stroke-dasharray="62 125" />
              </svg>
              <span class="mastery-percent">50%</span>
            </div>
          </div>
        </div>
        <div class="card-body">
          <p>黃色邊框和背景漸變，表示還需要練習。</p>
        </div>
      </div>
      
      <!-- 高掌握度 -->
      <div class="card" data-type="knowledge" data-mastery="high" data-interactive="true">
        <div class="card-header">
          <h3 class="card-title">高掌握度（> 70%）</h3>
          <div class="mastery-indicator">
            <div class="mastery-circle">
              <svg width="48" height="48">
                <circle cx="24" cy="24" r="20" stroke="#e5e7eb" stroke-width="3" fill="none" />
                <circle cx="24" cy="24" r="20" stroke="#10b981" stroke-width="3" fill="none"
                        stroke-dasharray="100 125" />
              </svg>
              <span class="mastery-percent">80%</span>
            </div>
          </div>
        </div>
        <div class="card-body">
          <p>綠色邊框和背景漸變，表示掌握良好。</p>
        </div>
      </div>
    </div>
  </section>
  
  <!-- 群組卡片 -->
  <section class="test-section">
    <h2 class="test-title">群組卡片（系統性錯誤）</h2>
    
    <div class="knowledge-groups">
      <div class="card" data-type="group" data-mastery="medium">
        <div class="group-header">
          <div class="group-info">
            <h4 class="group-title">時態錯誤</h4>
            <div class="group-stats">
              <span class="stat-item">
                <span class="stat-icon">📝</span>
                5 個實例
              </span>
              <span class="stat-item">
                <span class="stat-icon">❌</span>
                總計 12 次錯誤
              </span>
              <span class="stat-item">
                <span class="stat-icon">📊</span>
                掌握度 45%
              </span>
            </div>
          </div>
          <div class="progress-ring">
            <svg width="60" height="60">
              <circle cx="30" cy="30" r="25" stroke-width="4" fill="none" stroke="#e5e7eb" />
              <circle cx="30" cy="30" r="25" stroke-width="4" fill="none" 
                      stroke="#f59e0b"
                      stroke-dasharray="70 157" />
            </svg>
            <span class="progress-text">45%</span>
          </div>
          <button class="btn" data-variant="icon" data-size="sm">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
        </div>
        
        <div class="group-content expanded">
          <div class="group-instances">
            <div class="card" data-type="instance" data-size="sm">
              <div class="instance-header">
                <span class="instance-title">現在完成式使用錯誤</span>
                <span class="instance-mastery">40%</span>
              </div>
              <p class="instance-explanation">應該使用現在完成式表示持續到現在的動作</p>
            </div>
            
            <div class="card" data-type="instance" data-size="sm">
              <div class="instance-header">
                <span class="instance-title">過去式與現在式混淆</span>
                <span class="instance-mastery">50%</span>
              </div>
              <p class="instance-explanation">注意時間標記詞來判斷正確時態</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- 尺寸變體 -->
  <section class="test-section">
    <h2 class="test-title">卡片尺寸</h2>
    
    <div class="cards-grid">
      <div class="card" data-size="sm">
        <div class="card-header">
          <h3 class="card-title">小尺寸卡片</h3>
        </div>
        <div class="card-body">
          <p>較小的內邊距</p>
        </div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">預設尺寸卡片</h3>
        </div>
        <div class="card-body">
          <p>標準內邊距</p>
        </div>
      </div>
      
      <div class="card" data-size="lg">
        <div class="card-header">
          <h3 class="card-title">大尺寸卡片</h3>
        </div>
        <div class="card-body">
          <p>較大的內邊距，更寬鬆的排版</p>
        </div>
      </div>
    </div>
  </section>
  
  <!-- 完整結構展示 -->
  <section class="test-section">
    <h2 class="test-title">完整卡片結構</h2>
    
    <div class="cards-grid">
      <div class="card" data-type="knowledge" data-interactive="true" data-decorated="true" data-mastery="medium">
        <div class="card-header">
          <h3 class="card-title">動詞時態錯誤</h3>
          <div class="card-meta">
            <span class="badge" data-variant="warning">系統性錯誤</span>
            <span class="badge" data-variant="primary" data-size="sm">文法</span>
          </div>
        </div>
        
        <div class="card-subtitle">需要根據時間狀語選擇正確的時態</div>
        
        <div class="card-body">
          <p>在表達過去發生但對現在有影響的動作時，應使用現在完成式而非過去式。</p>
          
          <div class="card-comparison">
            <div class="compare-item">
              <span class="compare-label">❌ 錯誤：</span>
              <span>I already did my homework.</span>
            </div>
            <div class="compare-item">
              <span class="compare-label">✅ 正確：</span>
              <span>I have already done my homework.</span>
            </div>
          </div>
        </div>
        
        <div class="card-stats">
          <div class="stat-item">
            <span class="stat-label">錯誤次數</span>
            <span class="stat-value">5</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">正確次數</span>
            <span class="stat-value">3</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">掌握度</span>
            <span class="stat-value">38%</span>
          </div>
        </div>
        
        <div class="card-footer">
          <div class="card-actions">
            <button class="btn" data-variant="primary" data-size="sm">開始複習</button>
            <button class="btn" data-variant="ghost" data-size="sm">查看詳情</button>
          </div>
          <span class="muted" style="font-size: 0.875rem;">下次複習：2天後</span>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
  // 測試群組展開/收合
  document.querySelectorAll('.group-header').forEach(header => {
    header.addEventListener('click', () => {
      const content = header.nextElementSibling;
      content.classList.toggle('expanded');
      const icon = header.querySelector('svg');
      if (icon) {
        icon.style.transform = content.classList.contains('expanded') ? 'rotate(180deg)' : '';
      }
    });
  });
</script>
{% endblock %}