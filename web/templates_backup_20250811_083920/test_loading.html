{% extends "base.html" %}

{% block title %}測試載入狀態系統 - Linker{% endblock %}

{% block styles %}
<style>
  .test-section {
    margin: 40px 0;
    padding: 20px 0;
    border-bottom: 2px solid var(--border);
  }
  
  .test-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 24px;
    color: var(--text);
  }
  
  .test-subtitle {
    font-size: 1rem;
    font-weight: 500;
    margin: 20px 0 16px;
    color: var(--text-muted);
  }
  
  .spinner-showcase {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 32px;
    padding: 20px;
    background: var(--surface);
    border-radius: var(--radius);
    margin-bottom: 20px;
    min-height: 100px;
  }
  
  .spinner-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }
  
  .spinner-label {
    font-size: 0.875rem;
    color: var(--text-muted);
  }
  
  .demo-card {
    max-width: 400px;
  }
  
  .demo-button-group {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
  }
</style>
{% endblock %}

{% block content %}
<div class="container">
  <h1 style="text-align: center; margin: 40px 0;">統一載入狀態系統測試頁</h1>
  
  <!-- Spinner 類型 -->
  <section class="test-section">
    <h2 class="test-title">Spinner 類型</h2>
    
    <h3 class="test-subtitle">簡單 Spinner</h3>
    <div class="spinner-showcase">
      <div class="spinner-item">
        <div class="spinner spinner-simple" data-size="xs"></div>
        <span class="spinner-label">XS</span>
      </div>
      <div class="spinner-item">
        <div class="spinner spinner-simple" data-size="sm"></div>
        <span class="spinner-label">SM</span>
      </div>
      <div class="spinner-item">
        <div class="spinner spinner-simple" data-size="md"></div>
        <span class="spinner-label">MD</span>
      </div>
      <div class="spinner-item">
        <div class="spinner spinner-simple" data-size="lg"></div>
        <span class="spinner-label">LG</span>
      </div>
      <div class="spinner-item">
        <div class="spinner spinner-simple" data-size="xl"></div>
        <span class="spinner-label">XL</span>
      </div>
    </div>
    
    <h3 class="test-subtitle">雙環 Spinner</h3>
    <div class="spinner-showcase">
      <div class="spinner-item">
        <div class="spinner-dual" data-size="sm"></div>
        <span class="spinner-label">小型</span>
      </div>
      <div class="spinner-item">
        <div class="spinner-dual" data-size="md"></div>
        <span class="spinner-label">中型</span>
      </div>
      <div class="spinner-item">
        <div class="spinner-dual" data-size="lg"></div>
        <span class="spinner-label">大型</span>
      </div>
    </div>
    
    <h3 class="test-subtitle">多環 Spinner</h3>
    <div class="spinner-showcase">
      <div class="spinner-item">
        <div class="spinner-rings">
          <div class="spinner-ring"></div>
          <div class="spinner-ring"></div>
          <div class="spinner-ring"></div>
        </div>
        <span class="spinner-label">三環旋轉</span>
      </div>
    </div>
    
    <h3 class="test-subtitle">點狀 Spinner</h3>
    <div class="spinner-showcase">
      <div class="spinner-item">
        <div class="spinner-dots">
          <span class="spinner-dot"></span>
          <span class="spinner-dot"></span>
          <span class="spinner-dot"></span>
        </div>
        <span class="spinner-label">脈動點</span>
      </div>
    </div>
  </section>
  
  <!-- 按鈕載入狀態 -->
  <section class="test-section">
    <h2 class="test-title">按鈕載入狀態</h2>
    
    <div class="demo-button-group">
      <button class="btn" data-variant="primary" onclick="toggleLoading(this)">
        <span class="btn-text">點擊載入</span>
      </button>
      <button class="btn" data-variant="secondary" data-loading="true">
        <span class="btn-text">載入中...</span>
      </button>
      <button class="btn" data-variant="success" data-size="lg" data-loading="true">
        <span class="btn-text">提交中...</span>
      </button>
      <button class="btn" data-variant="danger" data-size="sm" data-loading="true">
        <span class="btn-text">刪除中...</span>
      </button>
    </div>
  </section>
  
  <!-- 卡片載入狀態 -->
  <section class="test-section">
    <h2 class="test-title">卡片載入狀態</h2>
    
    <div class="demo-card">
      <div class="card" data-loading="true">
        <div class="card-header">
          <h3 class="card-title">載入中的卡片</h3>
        </div>
        <div class="card-body">
          <p>這個卡片正在載入資料，顯示閃爍效果...</p>
        </div>
      </div>
    </div>
  </section>
  
  <!-- 骨架屏 -->
  <section class="test-section">
    <h2 class="test-title">骨架屏載入</h2>
    
    <div class="demo-card">
      <div class="card">
        <div class="skeleton skeleton-heading"></div>
        <div class="skeleton skeleton-text" data-lines="3"></div>
        <div style="display: flex; gap: 12px; margin-top: 16px;">
          <div class="skeleton skeleton-button"></div>
          <div class="skeleton skeleton-button"></div>
        </div>
      </div>
    </div>
    
    <h3 class="test-subtitle">骨架元素</h3>
    <div class="spinner-showcase" style="gap: 16px;">
      <div class="skeleton skeleton-avatar"></div>
      <div style="flex: 1;">
        <div class="skeleton skeleton-text" style="width: 60%;"></div>
        <div class="skeleton skeleton-text" style="width: 80%;"></div>
        <div class="skeleton skeleton-text" style="width: 40%;"></div>
      </div>
    </div>
  </section>
  
  <!-- 進度條 -->
  <section class="test-section">
    <h2 class="test-title">進度條</h2>
    
    <h3 class="test-subtitle">確定進度</h3>
    <div style="display: flex; flex-direction: column; gap: 16px;">
      <div class="progress">
        <div class="progress-bar" style="width: 25%;"></div>
      </div>
      <div class="progress">
        <div class="progress-bar" style="width: 50%;"></div>
      </div>
      <div class="progress">
        <div class="progress-bar" style="width: 75%;"></div>
      </div>
      <div class="progress">
        <div class="progress-bar" style="width: 100%;"></div>
      </div>
    </div>
    
    <h3 class="test-subtitle">不確定進度</h3>
    <div class="progress" data-indeterminate="true">
      <div class="progress-bar"></div>
    </div>
  </section>
  
  <!-- 載入覆蓋層 -->
  <section class="test-section">
    <h2 class="test-title">載入覆蓋層</h2>
    
    <button class="btn" data-variant="primary" onclick="showLoadingOverlay()">
      顯示全頁載入
    </button>
    
    <button class="btn" data-variant="secondary" onclick="showLoadingModal()">
      顯示載入模態框
    </button>
  </section>
  
  <!-- 表單載入 -->
  <section class="test-section">
    <h2 class="test-title">表單載入狀態</h2>
    
    <form class="form-loading" style="max-width: 400px;">
      <div class="form-group">
        <label class="form-label">使用者名稱</label>
        <input type="text" class="form-control" value="正在載入..." disabled>
      </div>
      <div class="form-group">
        <label class="form-label">電子郵件</label>
        <input type="email" class="form-control" value="loading@example.com" disabled>
      </div>
      <button class="btn" data-variant="primary" disabled>提交</button>
    </form>
  </section>
  
  <!-- 頁面載入 -->
  <section class="test-section">
    <h2 class="test-title">頁面載入狀態</h2>
    
    <div class="card">
      <div class="page-loading">
        <div class="spinner spinner-simple" data-size="lg"></div>
        <p class="loading-message">正在載入頁面內容...</p>
      </div>
    </div>
  </section>
  
  <!-- 內容載入 -->
  <section class="test-section">
    <h2 class="test-title">內容載入狀態</h2>
    
    <div class="card">
      <div class="content-loading" style="height: 200px;">
        <!-- Spinner 會自動居中顯示 -->
      </div>
    </div>
  </section>
</div>

<!-- 全頁載入覆蓋層（預設隱藏） -->
<div class="loading-overlay" id="loadingOverlay">
  <div class="loading-modal" data-glass="true">
    <div class="spinner-rings" style="margin: 0 auto 24px;">
      <div class="spinner-ring"></div>
      <div class="spinner-ring"></div>
      <div class="spinner-ring"></div>
    </div>
    <h3 class="loading-title">載入中</h3>
    <p class="loading-message">正在處理您的請求，請稍候...</p>
    <div class="loading-tips">
      <div class="loading-tip">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        <span>驗證資料</span>
      </div>
      <div class="loading-tip">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        <span>處理請求</span>
      </div>
      <div class="loading-tip">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        <span>完成操作</span>
      </div>
    </div>
  </div>
</div>

<!-- 載入模態框（預設隱藏） -->
<div class="loading-overlay" id="loadingModal" style="background: rgba(0, 0, 0, 0.6);">
  <div class="loading-modal">
    <div class="spinner-dual" data-size="lg" style="margin: 0 auto 24px;"></div>
    <h3 class="loading-title">處理中</h3>
    <p class="loading-message">這可能需要幾秒鐘時間</p>
  </div>
</div>

<script>
  // 切換按鈕載入狀態
  function toggleLoading(button) {
    const isLoading = button.getAttribute('data-loading') === 'true';
    button.setAttribute('data-loading', !isLoading);
    
    if (!isLoading) {
      // 3秒後自動恢復
      setTimeout(() => {
        button.setAttribute('data-loading', 'false');
      }, 3000);
    }
  }
  
  // 顯示全頁載入
  function showLoadingOverlay() {
    const overlay = document.getElementById('loadingOverlay');
    overlay.setAttribute('data-visible', 'true');
    
    // 3秒後自動隱藏
    setTimeout(() => {
      overlay.setAttribute('data-visible', 'false');
    }, 3000);
  }
  
  // 顯示載入模態框
  function showLoadingModal() {
    const modal = document.getElementById('loadingModal');
    modal.setAttribute('data-visible', 'true');
    
    // 2秒後自動隱藏
    setTimeout(() => {
      modal.setAttribute('data-visible', 'false');
    }, 2000);
  }
  
  // 動態更新進度條示例
  document.addEventListener('DOMContentLoaded', function() {
    const progressBars = document.querySelectorAll('.progress-bar');
    progressBars.forEach((bar, index) => {
      if (bar.parentElement.getAttribute('data-indeterminate') !== 'true') {
        const targetWidth = bar.style.width;
        bar.style.width = '0%';
        setTimeout(() => {
          bar.style.width = targetWidth;
        }, 100 + (index * 200));
      }
    });
  });
</script>
{% endblock %}