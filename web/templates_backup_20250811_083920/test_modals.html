{% extends "base.html" %}

{% block title %}測試模態框系統 - Linker{% endblock %}

{% block styles %}
<style>
  .test-section {
    margin: 40px 0;
    padding: 20px 0;
    border-bottom: 2px solid var(--border);
  }
  
  .test-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 24px;
    color: var(--text);
  }
  
  .test-subtitle {
    font-size: 1rem;
    font-weight: 500;
    margin: 20px 0 16px;
    color: var(--text-muted);
  }
  
  .demo-button-group {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin-bottom: 20px;
  }
  
  .demo-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 20px;
  }
</style>
{% endblock %}

{% block content %}
<div class="container">
  <h1 style="text-align: center; margin: 40px 0;">統一模態框系統測試頁</h1>
  
  <!-- 基礎模態框 -->
  <section class="test-section">
    <h2 class="test-title">基礎模態框</h2>
    
    <div class="demo-button-group">
      <button class="btn" data-variant="primary" onclick="showModal('basicModal')">
        基礎模態框
      </button>
      <button class="btn" data-variant="secondary" onclick="showModal('glassModal')">
        Glass 效果
      </button>
      <button class="btn" data-variant="info" onclick="showModal('largeModal')">
        大型模態框
      </button>
      <button class="btn" data-variant="warning" onclick="showModal('fullModal')">
        全螢幕模態框
      </button>
    </div>
  </section>
  
  <!-- 確認對話框 -->
  <section class="test-section">
    <h2 class="test-title">確認對話框</h2>
    
    <div class="demo-button-group">
      <button class="btn" data-variant="success" onclick="showModal('confirmSuccess')">
        成功確認
      </button>
      <button class="btn" data-variant="danger" onclick="showModal('confirmDelete')">
        刪除確認
      </button>
      <button class="btn" data-variant="warning" onclick="showModal('confirmWarning')">
        警告確認
      </button>
    </div>
  </section>
  
  <!-- 表單模態框 -->
  <section class="test-section">
    <h2 class="test-title">表單模態框</h2>
    
    <div class="demo-button-group">
      <button class="btn" data-variant="primary" onclick="showModal('formModal')">
        打開表單
      </button>
      <button class="btn" data-variant="secondary" onclick="showModal('loginModal')">
        登入表單
      </button>
    </div>
  </section>
  
  <!-- 調試資訊模態框 -->
  <section class="test-section">
    <h2 class="test-title">調試資訊模態框</h2>
    
    <div class="demo-button-group">
      <button class="btn" data-variant="dark" onclick="showModal('debugModal')">
        查看調試資訊
      </button>
      <button class="btn" data-variant="ghost" onclick="showModal('codeModal')">
        查看程式碼
      </button>
    </div>
  </section>
  
  <!-- 媒體模態框 -->
  <section class="test-section">
    <h2 class="test-title">媒體模態框</h2>
    
    <div class="demo-button-group">
      <button class="btn" data-variant="primary" onclick="showModal('imageModal')">
        圖片預覽
      </button>
    </div>
  </section>
</div>

<!-- 基礎模態框 -->
<div class="modal-overlay" id="basicModal" onclick="hideModalOnOverlay(event, 'basicModal')">
  <div class="modal">
    <div class="modal-header">
      <h2 class="modal-title">基礎模態框</h2>
      <button class="modal-close" onclick="hideModal('basicModal')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <p>這是一個基礎的模態框組件。它包含了標題、內容區域和底部按鈕區。</p>
      <p>模態框支援多種尺寸、動畫效果和樣式變體。</p>
    </div>
    <div class="modal-footer">
      <button class="btn" data-variant="ghost" onclick="hideModal('basicModal')">取消</button>
      <button class="btn" data-variant="primary">確認</button>
    </div>
  </div>
</div>

<!-- Glass 效果模態框 -->
<div class="modal-overlay" id="glassModal" data-variant="light" onclick="hideModalOnOverlay(event, 'glassModal')">
  <div class="modal" data-glass="true">
    <div class="modal-header">
      <h2 class="modal-title">Glass Morphism 效果</h2>
      <button class="modal-close" onclick="hideModal('glassModal')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <p>這個模態框使用了 Glass Morphism 效果，具有半透明背景和模糊效果。</p>
      <p>適合用於需要保持背景可見性的場景。</p>
    </div>
    <div class="modal-footer">
      <button class="btn" data-variant="primary">了解</button>
    </div>
  </div>
</div>

<!-- 大型模態框 -->
<div class="modal-overlay" id="largeModal" onclick="hideModalOnOverlay(event, 'largeModal')">
  <div class="modal" data-size="lg">
    <div class="modal-header">
      <h2 class="modal-title">大型模態框</h2>
      <button class="modal-close" onclick="hideModal('largeModal')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <h3>更多內容空間</h3>
      <p>大型模態框提供了更寬的顯示區域，適合展示更多內容。</p>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
      <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    </div>
    <div class="modal-footer">
      <button class="btn" data-variant="ghost" onclick="hideModal('largeModal')">關閉</button>
    </div>
  </div>
</div>

<!-- 全螢幕模態框 -->
<div class="modal-overlay" id="fullModal" onclick="hideModalOnOverlay(event, 'fullModal')">
  <div class="modal" data-size="full">
    <div class="modal-header">
      <h2 class="modal-title">全螢幕模態框</h2>
      <button class="modal-close" onclick="hideModal('fullModal')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <h3>最大化顯示區域</h3>
      <p>全螢幕模態框佔據整個視窗，提供最大的內容展示空間。</p>
    </div>
    <div class="modal-footer">
      <button class="btn" data-variant="primary" onclick="hideModal('fullModal')">關閉</button>
    </div>
  </div>
</div>

<!-- 成功確認模態框 -->
<div class="modal-overlay" id="confirmSuccess" onclick="hideModalOnOverlay(event, 'confirmSuccess')">
  <div class="modal" data-type="alert" data-variant="success">
    <div class="modal-header">
      <button class="modal-close" onclick="hideModal('confirmSuccess')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="modal-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
      </div>
      <h3 class="modal-title">操作成功！</h3>
      <p class="modal-message">您的資料已成功儲存。</p>
    </div>
    <div class="modal-footer" data-align="center">
      <button class="btn" data-variant="success" onclick="hideModal('confirmSuccess')">確認</button>
    </div>
  </div>
</div>

<!-- 刪除確認模態框 -->
<div class="modal-overlay" id="confirmDelete" onclick="hideModalOnOverlay(event, 'confirmDelete')">
  <div class="modal" data-type="confirm">
    <div class="modal-header">
      <h2 class="modal-title">確認刪除</h2>
      <button class="modal-close" onclick="hideModal('confirmDelete')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <p class="modal-message">您確定要刪除這個項目嗎？此操作無法復原。</p>
    </div>
    <div class="modal-footer">
      <button class="btn" data-variant="ghost" onclick="hideModal('confirmDelete')">取消</button>
      <button class="btn" data-variant="danger">確認刪除</button>
    </div>
  </div>
</div>

<!-- 警告確認模態框 -->
<div class="modal-overlay" id="confirmWarning" onclick="hideModalOnOverlay(event, 'confirmWarning')">
  <div class="modal" data-type="alert" data-variant="warning">
    <div class="modal-header">
      <button class="modal-close" onclick="hideModal('confirmWarning')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="modal-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
          <line x1="12" y1="9" x2="12" y2="13"></line>
          <line x1="12" y1="17" x2="12.01" y2="17"></line>
        </svg>
      </div>
      <h3 class="modal-title">注意</h3>
      <p class="modal-message">請確認您的操作，某些變更可能會影響系統運作。</p>
    </div>
    <div class="modal-footer" data-align="center">
      <button class="btn" data-variant="ghost" onclick="hideModal('confirmWarning')">取消</button>
      <button class="btn" data-variant="warning">繼續</button>
    </div>
  </div>
</div>

<!-- 表單模態框 -->
<div class="modal-overlay" id="formModal" onclick="hideModalOnOverlay(event, 'formModal')">
  <div class="modal" data-type="form">
    <div class="modal-header">
      <h2 class="modal-title">編輯資料</h2>
      <button class="modal-close" onclick="hideModal('formModal')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <form>
        <div class="form-group">
          <label class="form-label">姓名</label>
          <input type="text" class="form-control" placeholder="請輸入姓名">
        </div>
        <div class="form-group">
          <label class="form-label">電子郵件</label>
          <input type="email" class="form-control" placeholder="example@email.com">
        </div>
        <div class="form-group">
          <label class="form-label">訊息</label>
          <textarea class="form-control" rows="3" placeholder="請輸入訊息..."></textarea>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button class="btn" data-variant="ghost" onclick="hideModal('formModal')">取消</button>
      <button class="btn" data-variant="primary">儲存</button>
    </div>
  </div>
</div>

<!-- 登入表單模態框 -->
<div class="modal-overlay" id="loginModal" onclick="hideModalOnOverlay(event, 'loginModal')">
  <div class="modal" data-type="form" data-size="sm">
    <div class="modal-header">
      <h2 class="modal-title">登入</h2>
      <button class="modal-close" onclick="hideModal('loginModal')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <form>
        <div class="form-group">
          <label class="form-label">使用者名稱</label>
          <input type="text" class="form-control" placeholder="使用者名稱或電子郵件">
        </div>
        <div class="form-group">
          <label class="form-label">密碼</label>
          <input type="password" class="form-control" placeholder="密碼">
        </div>
        <div class="form-group">
          <label class="form-checkbox">
            <input type="checkbox">
            <span>記住我</span>
          </label>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button class="btn" data-variant="primary" style="width: 100%;">登入</button>
    </div>
  </div>
</div>

<!-- 調試資訊模態框 -->
<div class="modal-overlay" id="debugModal" onclick="hideModalOnOverlay(event, 'debugModal')">
  <div class="modal" data-type="debug">
    <div class="modal-header">
      <h2 class="modal-title">調試資訊</h2>
      <button class="modal-close" onclick="hideModal('debugModal')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="debug-toolbar">
        <button class="debug-copy-btn" onclick="copyDebugContent()">複製</button>
        <span style="color: var(--gray-400); font-size: var(--text-xs);">JSON Response</span>
      </div>
      <div class="debug-content" id="debugContent">{
  "status": "success",
  "timestamp": "2024-12-28T10:30:00Z",
  "data": {
    "user_id": 12345,
    "session": "abc123def456",
    "permissions": ["read", "write", "admin"],
    "metadata": {
      "ip": "192.168.1.1",
      "user_agent": "Mozilla/5.0",
      "language": "zh-TW"
    }
  },
  "debug": {
    "execution_time": "125ms",
    "memory_usage": "2.4MB",
    "queries": 3
  }
}</div>
    </div>
  </div>
</div>

<!-- 程式碼模態框 -->
<div class="modal-overlay" id="codeModal" onclick="hideModalOnOverlay(event, 'codeModal')">
  <div class="modal" data-type="debug" data-size="lg">
    <div class="modal-header">
      <h2 class="modal-title">程式碼範例</h2>
      <button class="modal-close" onclick="hideModal('codeModal')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="debug-toolbar">
        <button class="debug-copy-btn">複製程式碼</button>
        <span style="color: var(--gray-400); font-size: var(--text-xs);">JavaScript</span>
      </div>
      <div class="debug-content">// 顯示模態框
function showModal(modalId) {
  const modal = document.getElementById(modalId);
  if (modal) {
    modal.setAttribute('data-visible', 'true');
    document.body.classList.add('modal-open');
  }
}

// 隱藏模態框
function hideModal(modalId) {
  const modal = document.getElementById(modalId);
  if (modal) {
    modal.setAttribute('data-visible', 'false');
    document.body.classList.remove('modal-open');
  }
}

// 點擊背景關閉
function hideModalOnOverlay(event, modalId) {
  if (event.target === event.currentTarget) {
    hideModal(modalId);
  }
}</div>
    </div>
  </div>
</div>

<!-- 圖片預覽模態框 -->
<div class="modal-overlay" id="imageModal" data-variant="dark" onclick="hideModalOnOverlay(event, 'imageModal')">
  <div class="modal" data-type="media">
    <div class="modal-header">
      <h2 class="modal-title">圖片預覽</h2>
      <button class="modal-close" onclick="hideModal('imageModal')">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <div style="display: flex; align-items: center; justify-content: center; height: 400px; background: var(--gray-100); border-radius: var(--radius);">
        <svg width="200" height="200" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" opacity="0.3">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
          <circle cx="8.5" cy="8.5" r="1.5"></circle>
          <polyline points="21 15 16 10 5 21"></polyline>
        </svg>
      </div>
    </div>
  </div>
</div>

<script>
  // 顯示模態框
  function showModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
      modal.setAttribute('data-visible', 'true');
      document.body.classList.add('modal-open');
      
      // 添加 ESC 鍵關閉功能
      document.addEventListener('keydown', function escHandler(e) {
        if (e.key === 'Escape') {
          hideModal(modalId);
          document.removeEventListener('keydown', escHandler);
        }
      });
    }
  }
  
  // 隱藏模態框
  function hideModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
      modal.setAttribute('data-visible', 'false');
      document.body.classList.remove('modal-open');
    }
  }
  
  // 點擊背景關閉
  function hideModalOnOverlay(event, modalId) {
    if (event.target === event.currentTarget) {
      hideModal(modalId);
    }
  }
  
  // 複製調試內容
  function copyDebugContent() {
    const content = document.getElementById('debugContent').textContent;
    navigator.clipboard.writeText(content).then(() => {
      // 顯示複製成功提示
      const btn = event.target;
      const originalText = btn.textContent;
      btn.textContent = '已複製！';
      setTimeout(() => {
        btn.textContent = originalText;
      }, 2000);
    });
  }
</script>
{% endblock %}