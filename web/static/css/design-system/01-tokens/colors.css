/* ================================================
   現代化三層顏色架構系統 v2
   ================================================
   
   Layer 1: 原始調色盤 (Raw Palette)
   Layer 2: 語義組合 (Semantic Combinations)
   Layer 3: 使用場景 (Use Cases) - 向後兼容
   
   ================================================ */

:root {
  /* ===== LAYER 1: 原始調色盤 ===== */
  
  /* ========== Transparency Alpha Levels ========== */
  /* 系統化透明度級別 - 用於各種覆蓋、陰影和背景效果 */
  --alpha-1: 0.02;   /* 極淡 - 微妙的背景覆蓋 */
  --alpha-2: 0.05;   /* 淡 - 輕微的懸停效果 */
  --alpha-3: 0.1;    /* 輕 - 標準的背景覆蓋和輕陰影 */
  --alpha-4: 0.2;    /* 中等 - 明顯的背景效果 */
  --alpha-5: 0.4;    /* 中強 - 明顯的覆蓋效果 */
  --alpha-6: 0.5;    /* 強 - 半透明效果 */
  --alpha-7: 0.75;   /* 很強 - 模態背景覆蓋 */
  --alpha-8: 0.9;    /* 極強 - 幾乎不透明的覆蓋 */
  --alpha-focus: 0.3; /* 聚焦 - 聚焦環和狀態指示 */
  --alpha-muted: 0.15; /* 柔和 - 較明顯的彩色覆蓋 */
  --alpha-glass-light: 0.7; /* 玻璃輕 - 輕度玻璃態效果 */
  --alpha-glass-heavy: 0.8; /* 玻璃重 - 重度玻璃態效果 */

  /* ========== Grayscale ========== */
  --gray-50: #fafafa;
  --gray-50-rgb: 250, 250, 250;
  --gray-100: #f4f4f5;
  --gray-200: #e4e4e7;
  --gray-300: #d4d4d8;
  --gray-400: #a1a1aa;
  --gray-500: #71717a;
  --gray-600: #52525b;
  --gray-700: #3f3f46;
  --gray-800: #27272a;
  --gray-900: #18181b;
  --gray-950: #09090b;
  
  /* ========== Accent (Primary) - Indigo ========== */
  --accent-50: #eef2ff;
  --accent-50-rgb: 238, 242, 255;
  --accent-100: #e0e7ff;
  --accent-100-rgb: 224, 231, 255;
  --accent-200: #c7d2fe;
  --accent-300: #a5b4fc;
  --accent-400: #818cf8;
  --accent-400-rgb: 129, 140, 248;
  --accent-500: #6366f1;
  --accent-600: #4f46e5;
  --accent-700: #4338ca;
  --accent-800: #3730a3;
  --accent-900: #312e81;
  
  /* ========== Semantic Base Colors ========== */
  /* Success - Green */
  --success-50: #ecfdf5;
  --success-50-rgb: 236, 253, 245;
  --success-100: #d1fae5;
  --success-200: #a7f3d0;
  --success-300: #6ee7b7;
  --success-400: #34d399;
  --success-500: #10b981;
  --success-600: #059669;
  --success-700: #047857;
  --success-800: #065f46;
  --success-900: #064e3b;
  
  /* Warning - Orange/Amber */
  --warning-50: #fffbeb;
  --warning-100: #fef3c7;
  --warning-200: #fed7aa;
  --warning-300: #fdba74;
  --warning-400: #fb923c;
  --warning-500: #f59e0b;
  --warning-600: #d97706;
  --warning-700: #b45309;
  --warning-800: #92400e;
  --warning-900: #78350f;
  
  /* Error - Red */
  --error-50: #fef2f2;
  --error-50-rgb: 254, 242, 242;
  --error-100: #fee2e2;
  --error-200: #fecaca;
  --error-300: #fca5a5;
  --error-400: #f87171;
  --error-500: #ef4444;
  --error-600: #dc2626;
  --error-700: #b91c1c;
  --error-800: #991b1b;
  --error-900: #7f1d1d;

  /* ========== Shadow Color System ========== */
  /* 系統化陰影顏色 - 基於透明度令牌的黑色陰影系統 */
  --shadow-subtle: rgba(0, 0, 0, var(--alpha-2));    /* 極淡陰影 - 微妙的元素分離 */
  --shadow-light: rgba(0, 0, 0, var(--alpha-3));     /* 輕陰影 - 卡片、按鈕等標準陰影 */
  --shadow-medium: rgba(0, 0, 0, var(--alpha-4));    /* 中等陰影 - 彈出菜單、下拉框 */
  --shadow-heavy: rgba(0, 0, 0, var(--alpha-6));     /* 重陰影 - 強調元素 */
  --shadow-modal: rgba(0, 0, 0, var(--alpha-7));     /* 模態陰影 - 模態對話框背景 */

  /* ========== Overlay Background System ========== */
  /* 系統化覆蓋背景 - 基於透明度令牌的白色覆蓋系統 */
  --overlay-subtle: rgba(255, 255, 255, var(--alpha-2));   /* 微妙覆蓋 - 懸停狀態 */
  --overlay-light: rgba(255, 255, 255, var(--alpha-3));    /* 輕覆蓋 - 標準背景覆蓋 */
  --overlay-medium: rgba(255, 255, 255, var(--alpha-8));   /* 強覆蓋 - 內容容器背景 */

  /* ========== Semantic Color Overlays ========== */
  /* 語義色彩的透明覆蓋版本 - 用於背景提示和狀態指示 */
  --success-overlay-subtle: rgba(16, 185, 129, var(--alpha-1));      /* 成功色微妙覆蓋 */
  --success-overlay-light: rgba(16, 185, 129, var(--alpha-3));       /* 成功色輕覆蓋 */
  --warning-overlay-subtle: rgba(245, 158, 11, var(--alpha-1));      /* 警告色微妙覆蓋 */
  --warning-overlay-light: rgba(245, 158, 11, var(--alpha-3));       /* 警告色輕覆蓋 */
  --error-overlay-subtle: rgba(239, 68, 68, var(--alpha-1));         /* 錯誤色微妙覆蓋 */
  --error-overlay-light: rgba(239, 68, 68, var(--alpha-3));          /* 錯誤色輕覆蓋 */
  --primary-overlay-subtle: rgba(79, 70, 229, var(--alpha-1));       /* 主色微妙覆蓋 */
  --primary-overlay-light: rgba(79, 70, 229, var(--alpha-3));        /* 主色輕覆蓋 */

  /* ===== LAYER 2: 語義組合層 ===== */
  
  /* ========== Primary Color System ========== */
  --primary: var(--accent-600);
  --primary-hover: var(--accent-700);
  --primary-active: var(--accent-800);
  --primary-light: var(--accent-50);
  --primary-subtle: var(--accent-100);
  --primary-muted: var(--accent-200);
  --primary-emphasis: var(--accent-900);
  
  /* ========== Success Color System ========== */
  --success: var(--success-600);
  --success-hover: var(--success-700);
  --success-active: var(--success-800);
  --success-light: var(--success-100);
  --success-subtle: var(--success-50);
  --success-muted: var(--success-200);
  --success-emphasis: var(--success-900);
  
  /* ========== Warning Color System ========== */
  --warning: var(--warning-600);
  --warning-hover: var(--warning-700);
  --warning-active: var(--warning-800);
  --warning-light: var(--warning-100);
  --warning-subtle: var(--warning-50);
  --warning-muted: var(--warning-200);
  --warning-emphasis: var(--warning-900);
  
  /* ========== Error Color System ========== */
  --error: var(--error-600);
  --error-hover: var(--error-700);
  --error-active: var(--error-800);
  --error-light: var(--error-100);
  --error-subtle: var(--error-50);
  --error-muted: var(--error-200);
  --error-emphasis: var(--error-900);
  
  /* ========== Info Color System ========== */
  --info: var(--accent-500);
  --info-hover: var(--accent-600);
  --info-active: var(--accent-700);
  --info-light: var(--accent-50);
  --info-subtle: var(--accent-100);
  --info-muted: var(--accent-200);
  --info-emphasis: var(--accent-900);
  
  /* ========== Surface Color System ========== */
  --surface-base: #ffffff;
  --surface-elevated: var(--gray-50);
  --surface-subtle: var(--gray-100);
  --surface-muted: var(--gray-200);
  --surface-emphasis: var(--gray-900);
  --surface-overlay: var(--overlay-medium);
  --surface-glass: rgba(255, 255, 255, var(--alpha-glass-light));
  
  /* ========== Text Color System ========== */
  --text-primary: var(--gray-900);
  --text-secondary: var(--gray-600);
  --text-muted: var(--gray-500);
  --text-disabled: var(--gray-400);
  --text-inverse: #ffffff;
  --text-accent: var(--accent-600);
  --text-on-primary: #ffffff;
  --text-on-success: #ffffff;
  --text-on-warning: var(--gray-900);
  --text-on-error: #ffffff;
  
  /* ========== Border Color System ========== */
  --border-light: var(--gray-200);
  --border-default: var(--gray-300);
  --border-emphasis: var(--gray-400);
  --border-strong: var(--gray-600);
  --border-dark: var(--gray-700);
  --border-focus: var(--accent-400);
  --border-accent: var(--accent-300);
  --border-success: var(--success-300);
  --border-warning: var(--warning-300);
  --border-error: var(--error-300);
  
  /* ========== Interactive State System ========== */
  --hover-bg: var(--gray-100);
  --hover-bg-subtle: var(--gray-50);
  --hover-border: var(--gray-400);
  --active-bg: var(--gray-200);
  --active-border: var(--gray-500);
  --focus-ring: 0 0 0 3px var(--accent-100);
  --focus-ring-error: 0 0 0 3px var(--error-100);
  --focus-ring-success: 0 0 0 3px var(--success-100);
  --focus-ring-warning: 0 0 0 3px var(--warning-100);

  /* ===== LAYER 3: 使用場景層（向後兼容） ===== */
  
  /* ========== Legacy Primary Colors ========== */
  --color-primary: var(--primary);
  --color-primary-hover: var(--primary-hover);
  --color-primary-active: var(--primary-active);
  --color-primary-light: var(--primary-light);
  --color-primary-lighter: var(--primary-subtle);
  --color-primary-subtle: var(--primary-subtle);
  --primary-base: var(--primary);
  
  /* ========== Legacy Success Colors ========== */
  --color-success: var(--success);
  --color-success-hover: var(--success-hover);
  --color-success-active: var(--success-active);
  --color-success-light: var(--success-light);
  --color-success-subtle: var(--success-subtle);
  --success-base: var(--success);
  
  /* ========== Legacy Warning Colors ========== */
  --color-warning: var(--warning);
  --color-warning-hover: var(--warning-hover);
  --color-warning-active: var(--warning-active);
  --color-warning-light: var(--warning-light);
  --color-warning-subtle: var(--warning-subtle);
  --warning-base: var(--warning);
  
  /* ========== Legacy Error Colors ========== */
  --color-error: var(--error);
  --color-error-hover: var(--error-hover);
  --color-error-active: var(--error-active);
  --color-error-light: var(--error-light);
  --color-error-subtle: var(--error-subtle);
  --error-base: var(--error);
  --error-border: var(--error-muted);
  
  /* ========== Legacy Info Colors ========== */
  --color-info: var(--info);
  --color-info-hover: var(--info-hover);
  --color-info-active: var(--info-active);
  --color-info-light: var(--info-light);
  --color-info-subtle: var(--info-subtle);
  
  /* ========== Legacy Background Colors ========== */
  --bg-primary: var(--surface-base);
  --bg-secondary: var(--surface-elevated);
  --bg-tertiary: var(--surface-muted);
  --bg-overlay: var(--shadow-heavy);
  --bg-accent-subtle: var(--primary-light);
  --bg-gray-subtle: var(--gray-50);
  
  /* ========== Legacy Shadow Colors ========== */
  --shadow-color: var(--shadow-light);
  --shadow-color-light: var(--shadow-subtle);
  --shadow-color-dark: var(--shadow-medium);
  
  /* ========== Legacy RGB Values ========== */
  --accent-600-rgb: 79, 70, 229;
  --accent-rgb: 79, 70, 229;  /* Alias for --accent-600-rgb */
  --success-600-rgb: 5, 150, 105;
  --warning-600-rgb: 217, 119, 6;
  --error-600-rgb: 220, 38, 38;
}

/* ========== 暗色模式支援 ========== */
@media (prefers-color-scheme: dark) {
  :root {
    /* ===== LAYER 2: 暗色模式語義組合 ===== */
    
    /* ========== Primary Color System (Dark) ========== */
    --primary: var(--accent-600);
    --primary-hover: var(--accent-400);
    --primary-active: var(--accent-300);
    --primary-light: var(--primary-overlay-light);
    --primary-subtle: var(--primary-overlay-subtle);
    --primary-muted: rgba(99, 102, 241, var(--alpha-muted));
    --primary-emphasis: var(--accent-200);
    
    /* ========== Success Color System (Dark) ========== */
    --success: var(--success-600);
    --success-hover: var(--success-400);
    --success-active: var(--success-300);
    --success-light: var(--success-overlay-light);
    --success-subtle: var(--success-overlay-subtle);
    --success-muted: rgba(16, 185, 129, var(--alpha-muted));
    --success-emphasis: var(--success-200);
    
    /* ========== Warning Color System (Dark) ========== */
    --warning: var(--warning-700);
    --warning-hover: var(--warning-400);
    --warning-active: var(--warning-300);
    --warning-light: var(--warning-overlay-light);
    --warning-subtle: var(--warning-overlay-subtle);
    --warning-muted: rgba(245, 158, 11, var(--alpha-muted));
    --warning-emphasis: var(--warning-200);
    
    /* ========== Error Color System (Dark) ========== */
    --error: var(--error-600);
    --error-hover: var(--error-400);
    --error-active: var(--error-300);
    --error-light: var(--error-overlay-light);
    --error-subtle: var(--error-overlay-subtle);
    --error-muted: rgba(239, 68, 68, var(--alpha-muted));
    --error-emphasis: var(--error-200);
    
    /* ========== Info Color System (Dark) ========== */
    --info: var(--accent-400);
    --info-hover: var(--accent-300);
    --info-active: var(--accent-200);
    --info-light: rgba(129, 140, 248, var(--alpha-3));
    --info-subtle: rgba(129, 140, 248, var(--alpha-2));
    --info-muted: rgba(129, 140, 248, var(--alpha-muted));
    --info-emphasis: var(--accent-200);
    
    /* ========== Surface Color System (Dark) ========== */
    --surface-base: #18181b;
    --surface-elevated: #27272a;
    --surface-subtle: #1f1f23;
    --surface-muted: #3f3f46;
    --surface-emphasis: #fafafa;
    --surface-overlay: rgba(24, 24, 27, var(--alpha-8));
    --surface-glass: rgba(24, 24, 27, var(--alpha-glass-heavy));
    
    /* ========== Text Color System (Dark) ========== */
    --text-primary: #fafafa;
    --text-secondary: #a1a1aa;
    --text-muted: #9ca3af;
    --text-disabled: #52525b;
    --text-inverse: var(--gray-900);
    --text-accent: var(--accent-400);
    --text-on-primary: #ffffff;
    --text-on-success: #ffffff;
    --text-on-warning: var(--gray-900);
    --text-on-error: #ffffff;
    
    /* ========== Border Color System (Dark) ========== */
    --border-light: #27272a;
    --border-default: #3f3f46;
    --border-emphasis: #52525b;
    --border-strong: #71717a;
    --border-dark: var(--gray-800);
    --border-focus: var(--accent-500);
    --border-accent: var(--accent-600);
    --border-success: var(--success-600);
    --border-warning: var(--warning-600);
    --border-error: var(--error-600);
    
    /* ========== Interactive State System (Dark) ========== */
    --hover-bg: rgba(255, 255, 255, var(--alpha-2));
    --hover-bg-subtle: rgba(255, 255, 255, var(--alpha-1));
    --hover-border: var(--gray-600);
    --active-bg: rgba(255, 255, 255, var(--alpha-3));
    --active-border: var(--gray-500);
    --focus-ring: 0 0 0 3px rgba(129, 140, 248, var(--alpha-focus));
    --focus-ring-error: 0 0 0 3px rgba(239, 68, 68, var(--alpha-focus));
    --focus-ring-success: 0 0 0 3px rgba(16, 185, 129, var(--alpha-focus));
    --focus-ring-warning: 0 0 0 3px rgba(245, 158, 11, var(--alpha-focus));

    /* ===== LAYER 3: 暗色模式使用場景（向後兼容） ===== */
    
    /* ========== Legacy Colors Updated for Dark Mode ========== */
    --bg-accent-subtle: var(--primary-light);
    --bg-gray-subtle: var(--gray-900);
    --shadow-color: rgba(0, 0, 0, var(--alpha-focus));
    --shadow-color-light: rgba(0, 0, 0, var(--alpha-4));
    --shadow-color-dark: rgba(0, 0, 0, var(--alpha-5));
    
    /* Glass morphism border for dark mode */
    --glass-border-dark: rgba(255, 255, 255, var(--alpha-3));
    
    /* Additional dark mode specific variables */
    --surface-dark: #0f0f11;
    --hover-bg-dark: rgba(0, 0, 0, var(--alpha-focus));
  }
}

/* ========== 實用工具類別 ========== */
.color-primary { color: var(--primary) !important; }
.color-success { color: var(--success) !important; }
.color-warning { color: var(--warning) !important; }
.color-error { color: var(--error) !important; }
.color-info { color: var(--info) !important; }

.bg-primary { background-color: var(--primary) !important; }
.bg-success { background-color: var(--success) !important; }
.bg-warning { background-color: var(--warning) !important; }
.bg-error { background-color: var(--error) !important; }
.bg-info { background-color: var(--info) !important; }

.bg-primary-subtle { background-color: var(--primary-subtle) !important; }
.bg-success-subtle { background-color: var(--success-subtle) !important; }
.bg-warning-subtle { background-color: var(--warning-subtle) !important; }
.bg-error-subtle { background-color: var(--error-subtle) !important; }
.bg-info-subtle { background-color: var(--info-subtle) !important; }

.border-primary { border-color: var(--primary) !important; }
.border-success { border-color: var(--success) !important; }
.border-warning { border-color: var(--warning) !important; }
.border-error { border-color: var(--error) !important; }
.border-info { border-color: var(--info) !important; }