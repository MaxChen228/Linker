/* 
 * Utility Components
 * 實用工具組件
 */

/* Footer */
footer.container {
  border-top: none;
  padding: var(--space-12) var(--space-6);
  text-align: center;
  background: var(--surface-base);
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  margin-top: var(--space-12);
}

footer small {
  color: var(--text-muted);
  font-size: var(--text-sm);
}

/* Draft Functionality */
.draft-notification {
  background: var(--info-subtle);
  border: 1px solid var(--info);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  margin-bottom: var(--space-5);
  display: flex;
  align-items: center;
  justify-content: space-between;
  animation: var(--animation-slide-in-up);
  box-shadow: var(--shadow-sm);
}

.draft-notification span {
  color: var(--text-primary);
  font-size: var(--text-sm);
}

.draft-buttons {
  display: flex;
  gap: var(--space-2);
}

/* Save Indicator */
.save-indicator {
  position: fixed;
  bottom: var(--space-8);
  right: var(--space-8);
  background: var(--surface-base);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-full);
  padding: var(--space-3) var(--space-6);
  font-size: var(--text-sm);
  color: var(--text-muted);
  opacity: 0;
  transition: var(--transition-all);
  z-index: var(--z-toast);
  pointer-events: none;
  box-shadow: var(--shadow-md);
}

.save-indicator.show {
  opacity: 1;
  animation: var(--animation-pulse);
}

.save-indicator.saving {
  border-color: var(--border-accent);
  color: var(--text-accent);
  background: var(--primary-subtle);
}

.save-indicator.saved {
  border-color: var(--success);
  color: var(--success);
  background: var(--success-subtle);
}

.save-indicator.restored {
  background: var(--info-subtle);
  border-color: var(--info);
  color: var(--info);
}

/* Accessibility Improvements */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .card,
  .btn,
  nav a,
  .item {
    transform: none !important;
    will-change: auto !important;
  }
  
  .save-indicator,
  .draft-notification {
    animation: none !important;
  }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
  .card,
  .btn,
  .badge,
  .form-control {
    border-width: 2px;
  }
  
  .focus-ring {
    outline-width: 3px;
  }
}

/* ========== Display Utilities ========== */
.hidden {
  display: none !important;
}

.block {
  display: block !important;
}

.inline-block {
  display: inline-block !important;
}

.flex {
  display: flex !important;
}

.inline-flex {
  display: inline-flex !important;
}

.grid {
  display: grid !important;
}

.inline-grid {
  display: inline-grid !important;
}

.table {
  display: table !important;
}

.table-cell {
  display: table-cell !important;
}

.table-row {
  display: table-row !important;
}

/* ========== Visibility Utilities ========== */
.visible {
  visibility: visible !important;
}

.invisible {
  visibility: hidden !important;
}

/* ========== Opacity Utilities ========== */
.opacity-0 {
  opacity: 0 !important;
}

.opacity-25 {
  opacity: 0.25 !important;
}

.opacity-50 {
  opacity: 0.5 !important;
}

.opacity-75 {
  opacity: 0.75 !important;
}

.opacity-100 {
  opacity: 1 !important;
}

/* ========== Text Color Utilities ========== */
.text-primary {
  color: var(--text-primary) !important;
}

.text-secondary {
  color: var(--text-secondary) !important;
}

.text-muted {
  color: var(--text-muted) !important;
}

.text-disabled {
  color: var(--text-disabled) !important;
}

.text-inverse {
  color: var(--text-inverse) !important;
}

.text-accent {
  color: var(--text-accent) !important;
}

.text-error {
  color: var(--error) !important;
}

.text-success {
  color: var(--success) !important;
}

.text-warning {
  color: var(--warning) !important;
}

.text-info {
  color: var(--info) !important;
}

/* ========== Background Color Utilities ========== */
.bg-transparent {
  background-color: transparent !important;
}

.bg-surface-base {
  background-color: var(--surface-base) !important;
}

.bg-surface-elevated {
  background-color: var(--surface-elevated) !important;
}

.bg-surface-subtle {
  background-color: var(--surface-subtle) !important;
}

.bg-surface-muted {
  background-color: var(--surface-muted) !important;
}

.bg-hover {
  background-color: var(--hover-bg) !important;
}

.bg-hover-subtle {
  background-color: var(--hover-bg-subtle) !important;
}

.bg-active {
  background-color: var(--active-bg) !important;
}

/* ========== Border Utilities ========== */
.border {
  border: 1px solid var(--border-default) !important;
}

.border-0 {
  border: 0 !important;
}

.border-t {
  border-top: 1px solid var(--border-default) !important;
}

.border-r {
  border-right: 1px solid var(--border-default) !important;
}

.border-b {
  border-bottom: 1px solid var(--border-default) !important;
}

.border-l {
  border-left: 1px solid var(--border-default) !important;
}

.border-light {
  border-color: var(--border-light) !important;
}

.border-default {
  border-color: var(--border-default) !important;
}

.border-emphasis {
  border-color: var(--border-emphasis) !important;
}

.border-focus {
  border-color: var(--border-focus) !important;
}

/* ========== Position Utilities ========== */
.static {
  position: static !important;
}

.relative {
  position: relative !important;
}

.absolute {
  position: absolute !important;
}

.fixed {
  position: fixed !important;
}

.sticky {
  position: sticky !important;
}

/* ========== Z-Index Utilities ========== */
.z-0 {
  z-index: 0 !important;
}

.z-10 {
  z-index: 10 !important;
}

.z-20 {
  z-index: 20 !important;
}

.z-30 {
  z-index: 30 !important;
}

.z-40 {
  z-index: 40 !important;
}

.z-50 {
  z-index: 50 !important;
}

.z-auto {
  z-index: auto !important;
}

/* ========== Pointer Events Utilities ========== */
.pointer-events-none {
  pointer-events: none !important;
}

.pointer-events-auto {
  pointer-events: auto !important;
}

/* ========== Cursor Utilities ========== */
.cursor-auto {
  cursor: auto !important;
}

.cursor-default {
  cursor: default !important;
}

.cursor-pointer {
  cursor: pointer !important;
}

.cursor-wait {
  cursor: wait !important;
}

.cursor-text {
  cursor: text !important;
}

.cursor-move {
  cursor: move !important;
}

.cursor-help {
  cursor: help !important;
}

.cursor-not-allowed {
  cursor: not-allowed !important;
}

/* ========== Transition Utilities ========== */
.transition-none {
  transition: none !important;
}

.transition-all {
  transition: all var(--duration-normal) var(--ease-in-out) !important;
}

.transition-opacity {
  transition: opacity var(--duration-normal) var(--ease-in-out) !important;
}

.transition-transform {
  transition: transform var(--duration-normal) var(--ease-in-out) !important;
}

.transition-colors {
  transition: color var(--duration-normal) var(--ease-in-out), 
              background-color var(--duration-normal) var(--ease-in-out), 
              border-color var(--duration-normal) var(--ease-in-out) !important;
}

.transition-shadow {
  transition: box-shadow var(--duration-normal) var(--ease-in-out) !important;
}

.transition-fast {
  transition-duration: var(--duration-fast) !important;
}

.transition-normal {
  transition-duration: var(--duration-normal) !important;
}

.transition-slow {
  transition-duration: var(--duration-slow) !important;
}

/* ========== Transform Utilities ========== */
.transform {
  transform: translateX(var(--tw-translate-x, 0)) translateY(var(--tw-translate-y, 0)) rotate(var(--tw-rotate, 0)) skewX(var(--tw-skew-x, 0)) skewY(var(--tw-skew-y, 0)) scaleX(var(--tw-scale-x, 1)) scaleY(var(--tw-scale-y, 1)) !important;
}

.transform-none {
  transform: none !important;
}

.scale-0 {
  --tw-scale-x: 0;
  --tw-scale-y: 0;
  transform: scale(0) !important;
}

.scale-50 {
  --tw-scale-x: 0.5;
  --tw-scale-y: 0.5;
  transform: scale(0.5) !important;
}

.scale-75 {
  --tw-scale-x: 0.75;
  --tw-scale-y: 0.75;
  transform: scale(0.75) !important;
}

.scale-90 {
  --tw-scale-x: 0.9;
  --tw-scale-y: 0.9;
  transform: scale(0.9) !important;
}

.scale-95 {
  --tw-scale-x: 0.95;
  --tw-scale-y: 0.95;
  transform: scale(0.95) !important;
}

.scale-100 {
  --tw-scale-x: 1;
  --tw-scale-y: 1;
  transform: scale(1) !important;
}

.scale-105 {
  --tw-scale-x: 1.05;
  --tw-scale-y: 1.05;
  transform: scale(1.05) !important;
}

.scale-110 {
  --tw-scale-x: 1.1;
  --tw-scale-y: 1.1;
  transform: scale(1.1) !important;
}

.scale-125 {
  --tw-scale-x: 1.25;
  --tw-scale-y: 1.25;
  transform: scale(1.25) !important;
}

.scale-150 {
  --tw-scale-x: 1.5;
  --tw-scale-y: 1.5;
  transform: scale(1.5) !important;
}

/* ========== Flexbox Utilities ========== */
.flex-row {
  flex-direction: row !important;
}

.flex-row-reverse {
  flex-direction: row-reverse !important;
}

.flex-col {
  flex-direction: column !important;
}

.flex-col-reverse {
  flex-direction: column-reverse !important;
}

.flex-wrap {
  flex-wrap: wrap !important;
}

.flex-wrap-reverse {
  flex-wrap: wrap-reverse !important;
}

.flex-nowrap {
  flex-wrap: nowrap !important;
}

.items-start {
  align-items: flex-start !important;
}

.items-end {
  align-items: flex-end !important;
}

.items-center {
  align-items: center !important;
}

.items-baseline {
  align-items: baseline !important;
}

.items-stretch {
  align-items: stretch !important;
}

.justify-start {
  justify-content: flex-start !important;
}

.justify-end {
  justify-content: flex-end !important;
}

.justify-center {
  justify-content: center !important;
}

.justify-between {
  justify-content: space-between !important;
}

.justify-around {
  justify-content: space-around !important;
}

.justify-evenly {
  justify-content: space-evenly !important;
}

.flex-1 {
  flex: 1 1 0% !important;
}

.flex-auto {
  flex: 1 1 auto !important;
}

.flex-initial {
  flex: 0 1 auto !important;
}

.flex-none {
  flex: none !important;
}

.flex-shrink-0 {
  flex-shrink: 0 !important;
}

.flex-shrink {
  flex-shrink: 1 !important;
}

.flex-grow-0 {
  flex-grow: 0 !important;
}

.flex-grow {
  flex-grow: 1 !important;
}

/* ========== Gap Utilities ========== */
.gap-0 {
  gap: 0 !important;
}

.gap-1 {
  gap: var(--space-1) !important;
}

.gap-2 {
  gap: var(--space-2) !important;
}

.gap-3 {
  gap: var(--space-3) !important;
}

.gap-4 {
  gap: var(--space-4) !important;
}

.gap-5 {
  gap: var(--space-5) !important;
}

.gap-6 {
  gap: var(--space-6) !important;
}

.gap-8 {
  gap: var(--space-8) !important;
}

.gap-10 {
  gap: var(--space-10) !important;
}

.gap-12 {
  gap: var(--space-12) !important;
}

/* ========== Overflow Utilities ========== */
.overflow-auto {
  overflow: auto !important;
}

.overflow-hidden {
  overflow: hidden !important;
}

.overflow-clip {
  overflow: clip !important;
}

.overflow-visible {
  overflow: visible !important;
}

.overflow-scroll {
  overflow: scroll !important;
}

.overflow-x-auto {
  overflow-x: auto !important;
}

.overflow-y-auto {
  overflow-y: auto !important;
}

.overflow-x-hidden {
  overflow-x: hidden !important;
}

.overflow-y-hidden {
  overflow-y: hidden !important;
}

.overflow-x-clip {
  overflow-x: clip !important;
}

.overflow-y-clip {
  overflow-y: clip !important;
}

.overflow-x-visible {
  overflow-x: visible !important;
}

.overflow-y-visible {
  overflow-y: visible !important;
}

.overflow-x-scroll {
  overflow-x: scroll !important;
}

.overflow-y-scroll {
  overflow-y: scroll !important;
}

/* ========== Text Utilities ========== */
.text-left {
  text-align: left !important;
}

.text-center {
  text-align: center !important;
}

.text-right {
  text-align: right !important;
}

.text-justify {
  text-align: justify !important;
}

.text-start {
  text-align: start !important;
}

.text-end {
  text-align: end !important;
}

.uppercase {
  text-transform: uppercase !important;
}

.lowercase {
  text-transform: lowercase !important;
}

.capitalize {
  text-transform: capitalize !important;
}

.normal-case {
  text-transform: none !important;
}

.truncate {
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

.text-ellipsis {
  text-overflow: ellipsis !important;
}

.text-clip {
  text-overflow: clip !important;
}

.whitespace-normal {
  white-space: normal !important;
}

.whitespace-nowrap {
  white-space: nowrap !important;
}

.whitespace-pre {
  white-space: pre !important;
}

.whitespace-pre-line {
  white-space: pre-line !important;
}

.whitespace-pre-wrap {
  white-space: pre-wrap !important;
}

.whitespace-break-spaces {
  white-space: break-spaces !important;
}

.break-normal {
  overflow-wrap: normal !important;
  word-break: normal !important;
}

.break-words {
  overflow-wrap: break-word !important;
}

.break-all {
  word-break: break-all !important;
}

.break-keep {
  word-break: keep-all !important;
}

/* ========== User Select Utilities ========== */
.select-none {
  user-select: none !important;
}

.select-text {
  user-select: text !important;
}

.select-all {
  user-select: all !important;
}

.select-auto {
  user-select: auto !important;
}

/* ========== Dynamic Utilities ========== */

/* Dynamic Progress Utilities */
.progress-dynamic {
  width: var(--progress-width, 0%);
  transition: width var(--duration-normal) var(--ease-out);
}

.progress-height-dynamic {
  height: var(--progress-height, 0%);
  transition: height var(--duration-normal) var(--ease-out);
}

.progress-circle-dynamic {
  stroke-dashoffset: var(--progress-offset, 251.2);
  transition: stroke-dashoffset var(--duration-normal) var(--ease-out);
}

/* Mastery Level Indicators */
.mastery-indicator {
  width: var(--mastery-level, 0%);
  transition: width var(--duration-slow) var(--ease-out);
}

.mastery-opacity {
  opacity: var(--mastery-opacity, 0);
  transition: opacity var(--duration-normal) var(--ease-in-out);
}

.mastery-scale {
  transform: scale(var(--mastery-scale, 1));
  transition: transform var(--duration-normal) var(--ease-bounce);
}

/* Dynamic Dimensions */
.width-dynamic {
  width: var(--dynamic-width, auto);
  transition: width var(--duration-normal) var(--ease-in-out);
}

.height-dynamic {
  height: var(--dynamic-height, auto);
  transition: height var(--duration-normal) var(--ease-in-out);
}

.max-width-dynamic {
  max-width: var(--dynamic-max-width, none);
  transition: max-width var(--duration-normal) var(--ease-in-out);
}

.max-height-dynamic {
  max-height: var(--dynamic-max-height, none);
  transition: max-height var(--duration-normal) var(--ease-in-out);
}

/* Dynamic Positioning */
.translate-x-dynamic {
  transform: translateX(var(--translate-x, 0));
  transition: transform var(--duration-normal) var(--ease-in-out);
}

.translate-y-dynamic {
  transform: translateY(var(--translate-y, 0));
  transition: transform var(--duration-normal) var(--ease-in-out);
}

.translate-dynamic {
  transform: translate(var(--translate-x, 0), var(--translate-y, 0));
  transition: transform var(--duration-normal) var(--ease-in-out);
}

/* Dynamic Colors */
.color-dynamic {
  color: var(--dynamic-color, var(--text-primary));
  transition: color var(--duration-normal) var(--ease-in-out);
}

.bg-dynamic {
  background-color: var(--dynamic-bg, transparent);
  transition: background-color var(--duration-normal) var(--ease-in-out);
}

.border-color-dynamic {
  border-color: var(--dynamic-border-color, var(--border-default));
  transition: border-color var(--duration-normal) var(--ease-in-out);
}

/* Dynamic Rotation */
.rotate-dynamic {
  transform: rotate(var(--rotation-angle, 0deg));
  transition: transform var(--duration-normal) var(--ease-in-out);
}

/* Animation State Utilities */
.animate-slide-out {
  animation: slideOutRight var(--duration-normal) var(--ease-in) forwards;
}

.animate-slide-in {
  animation: slideInRight var(--duration-normal) var(--ease-out) forwards;
}

.animate-slide-out-left {
  animation: slideOutLeft var(--duration-normal) var(--ease-in) forwards;
}

.animate-slide-in-left {
  animation: slideInLeft var(--duration-normal) var(--ease-out) forwards;
}

.animate-slide-out-up {
  animation: slideOutUp var(--duration-normal) var(--ease-in) forwards;
}

.animate-slide-in-down {
  animation: slideInDown var(--duration-normal) var(--ease-out) forwards;
}

.animate-fade-out {
  animation: fadeOut var(--duration-normal) var(--ease-in) forwards;
}

.animate-scale-out {
  animation: scaleOut var(--duration-normal) var(--ease-in) forwards;
}

.animate-bounce-in {
  animation: bounceIn var(--duration-slow) var(--ease-bounce) forwards;
}

/* Interactive Animation States */
.hover-animate:hover {
  animation: var(--hover-animation, pulse 0.5s ease-in-out);
}

.focus-animate:focus {
  animation: var(--focus-animation, pulse 0.3s ease-in-out);
}

.active-animate:active {
  animation: var(--active-animation, scaleIn 0.15s ease-out);
}

/* Performance Optimizations */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: transform, opacity;
}

.animation-fill-both {
  animation-fill-mode: both;
}

.animation-fill-forwards {
  animation-fill-mode: forwards;
}

.animation-fill-backwards {
  animation-fill-mode: backwards;
}

/* ========== Link and Interaction Utilities ========== */
.link-plain {
  text-decoration: none !important;
  cursor: pointer !important;
}

.link-plain:hover {
  text-decoration: none !important;
}

/* ========== Progress Bar Utilities ========== */
.progress-bar {
  width: var(--width, 0%);
  transition: width var(--duration-normal) var(--ease-out);
}

.mastery-fill {
  width: var(--width, 0%);
  transition: width var(--duration-normal) var(--ease-out);
}

.mastery-indicator {
  width: var(--width, 0%);
  transition: width var(--duration-normal) var(--ease-out);
}

/* ========== Print Utilities ========== */
@media print {
  .no-print {
    display: none !important;
  }
  
  .page-break-before {
    page-break-before: always;
  }
  
  .page-break-after {
    page-break-after: always;
  }
}

/* ========== Additional Utility Classes (Migrated) ========== */

/* Muted Text - alias for existing text-muted */
.muted {
  color: var(--text-muted) !important;
  font-size: var(--text-sm) !important;
}

/* Gradient Text Effect */
.gradient-text {
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Focus Ring for Accessibility */
.focus-ring {
  outline: var(--border-width-normal) solid var(--primary) !important;
  outline-offset: var(--border-width-normal) !important;
  border-radius: var(--radius-md) !important;
}

/* Accessibility - Screen Reader Only */
.visually-hidden {
  position: absolute !important;
  width: var(--border-width-thin) !important;
  height: var(--border-width-thin) !important;
  padding: 0 !important;
  margin: calc(-1 * var(--border-width-thin)) !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border-width: 0 !important;
}

/* Responsive Utilities */
@media (max-width: var(--breakpoint-md)) {
  .hide-mobile {
    display: none !important;
  }
}

@media (min-width: var(--breakpoint-tablet)) {
  .show-mobile {
    display: none !important;
  }
}

/* Dark Mode Adjustments for New Utilities */
@media (prefers-color-scheme: dark) {
  .focus-ring {
    outline-color: var(--primary) !important;
  }
  
  .muted {
    color: var(--text-muted) !important;
  }
}