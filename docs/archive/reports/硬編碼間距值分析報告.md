# 硬編碼間距值檢測與替換建議報告

## 執行摘要

本報告系統性分析了Linker專案中所有CSS檔案的硬編碼間距值，發現了**123個**間距相關的硬編碼值，並提出了標準化替換方案。

## 1. 硬編碼值統計分析

### 1.1 整體統計
- **總計硬編碼間距值**: 123個
- **涉及檔案數量**: 28個CSS檔案
- **主要分佈**: 頁面檔案 (pages/) 佔 75%，設計系統檔案 (design-system/) 佔 25%

### 1.2 間距值使用頻率
基於統計分析，硬編碼間距值使用頻率如下：

| 間距值 | 使用次數 | 百分比 | 現有變數 | 建議替換 |
|--------|----------|---------|-----------|-----------|
| 2px    | 22       | 17.9%   | ❌        | **需新增** `--space-0-5: 2px` |
| 8px    | 21       | 17.1%   | ✅ `--space-2` | **直接替換** |
| 3px    | 21       | 17.1%   | ❌        | **需新增** `--space-0-75: 3px` |
| 12px   | 16       | 13.0%   | ✅ `--space-3` | **直接替換** |
| 16px   | 14       | 11.4%   | ✅ `--space-4` | **直接替換** |
| 4px    | 11       | 8.9%    | ✅ `--space-1` | **直接替換** |
| 24px   | 11       | 8.9%    | ✅ `--space-6` | **直接替換** |
| 20px   | 8        | 6.5%    | ✅ `--space-5` | **直接替換** |
| 10px   | 5        | 4.1%    | ✅ `--space-2-5` | **直接替換** |
| 15px   | 4        | 3.3%    | ❌        | **需新增** `--space-3-75: 15px` |
| 30px   | 3        | 2.4%    | ❌        | **需新增** `--space-7-5: 30px` |
| 6px    | 2        | 1.6%    | ✅ `--space-1-5` | **直接替換** |
| 其他   | 5        | 4.1%    | -         | 特殊處理 |

### 1.3 按用途分類

#### Padding (內邊距) - 42個
- **小尺寸**: 2px, 3px, 4px (用於 badge、小按鈕)
- **中等尺寸**: 8px, 12px, 16px (用於表單元素、卡片)
- **大尺寸**: 20px, 24px, 30px (用於模態框、容器)

#### Margin (外邊距) - 35個
- **小間距**: 2px, 4px, 8px (元素間小間隙)
- **標準間距**: 12px, 16px, 20px (區塊間距)
- **大間距**: 24px, 30px (版面分割)

#### Gap (Flexbox/Grid間隙) - 20個
- **密集排列**: 4px, 8px
- **標準排列**: 12px, 16px

#### 定位屬性 (top/right/bottom/left) - 26個
- **微調**: 2px, 3px (細節定位)
- **標準**: 10px, 12px, 20px, 24px (組件定位)

## 2. 檔案分佈分析

### 2.1 高影響檔案 (硬編碼值 ≥ 10個)
1. **pages/practice.css** (15個) - 練習頁面主要樣式
2. **pages/examples.css** (21個) - 範例展示頁面
3. **pages/practice-queue.css** (17個) - 題目佇列系統

### 2.2 中等影響檔案 (硬編碼值 5-9個)
1. **pages/knowledge.css** (8個)
2. **pages/knowledge-detail.css** (7個)
3. **design-system/03-components/forms.css** (6個)

### 2.3 低影響檔案 (硬編碼值 < 5個)
- 其餘22個檔案，主要為組件檔案和設計令牌檔案

## 3. 替換映射表

### 3.1 直接替換 (現有變數可用)
| 硬編碼值 | 現有變數 | 使用次數 | 優先級 |
|----------|-----------|-----------|---------|
| 4px      | `--space-1`   | 11 | **高** |
| 6px      | `--space-1-5` | 2  | 中 |
| 8px      | `--space-2`   | 21 | **高** |
| 10px     | `--space-2-5` | 5  | 中 |
| 12px     | `--space-3`   | 16 | **高** |
| 16px     | `--space-4`   | 14 | **高** |
| 20px     | `--space-5`   | 8  | 中 |
| 24px     | `--space-6`   | 11 | **高** |
| 32px     | `--space-8`   | 1  | 低 |
| 64px     | `--space-16`  | 1  | 低 |

### 3.2 需要新增變數
| 硬編碼值 | 建議變數 | 使用次數 | 優先級 | 說明 |
|----------|-----------|-----------|---------|------|
| 2px      | `--space-0-5: 2px`   | 22 | **高** | 小邊框、細節調整 |
| 3px      | `--space-0-75: 3px`  | 21 | **高** | 裝飾邊框、分割線 |
| 15px     | `--space-3-75: 15px` | 4  | 中 | 特殊間距需求 |
| 30px     | `--space-7-5: 30px`  | 3  | 中 | 大區塊間距 |

### 3.3 特殊情況處理
- **-1px** (screen reader隱藏): 保持硬編碼
- **-8px, -12px, -20px** (負值定位): 使用負值變數
- **36px, 14px** (單次使用): 評估是否需要標準化

## 4. 優先級分級

### 高優先級 (立即執行)
**影響**: 使用頻次 ≥ 10次，或核心頁面檔案
- **8px** → `--space-2` (21次使用)
- **2px** → 新增 `--space-0-5` (22次使用)
- **3px** → 新增 `--space-0-75` (21次使用)
- **12px** → `--space-3` (16次使用)
- **16px** → `--space-4` (14次使用)
- **24px** → `--space-6` (11次使用)

### 中優先級 (次階段執行)
**影響**: 使用頻次 5-9次
- **20px** → `--space-5` (8次使用)
- **10px** → `--space-2-5` (5次使用)
- **15px** → 新增 `--space-3-75` (4次使用)

### 低優先級 (最後執行)
**影響**: 使用頻次 < 5次，或特殊用途
- 剩餘所有單次或少量使用的值

## 5. 實施建議

### 5.1 第一階段：變數系統擴充
在 `design-system/01-tokens/spacing.css` 中新增變數：
```css
/* 新增精細間距變數 */
--space-0-5: 2px;    /* 0.25 * 8 */
--space-0-75: 3px;   /* 0.375 * 8 */
--space-3-75: 15px;  /* 1.875 * 8 */
--space-7-5: 30px;   /* 3.75 * 8 */
```

### 5.2 第二階段：高優先級檔案替換
按優先級順序替換：
1. `pages/practice-queue.css` (新檔案，容易修改)
2. `pages/examples.css` 
3. `pages/practice.css` (核心功能頁面)

### 5.3 第三階段：中低優先級檔案
逐步替換剩餘檔案中的硬編碼值

### 5.4 第四階段：驗證與清理
- 確認視覺效果一致性
- 移除未使用的硬編碼值
- 更新文檔說明

## 6. 風險評估

### 6.1 高風險項目
- **核心頁面樣式**: practice.css, knowledge.css
- **複雜組件**: 表單元件、模態框

### 6.2 低風險項目
- **新檔案**: practice-queue.css
- **裝飾性樣式**: 邊框、陰影

### 6.3 緩解策略
- 分階段實施，每階段測試驗證
- 保留原始檔案備份
- 重點測試核心功能頁面

## 7. 預期效益

### 7.1 維護性提升
- 統一間距系統，降低維護複雜度
- 集中式管理，便於全域調整

### 7.2 設計一致性
- 統一的間距標準
- 更好的視覺韻律

### 7.3 開發效率
- 減少重複定義
- 提升設計系統可用性

## 8. 時間估算

- **第一階段** (變數擴充): 0.5天
- **第二階段** (高優先級替換): 2天  
- **第三階段** (中低優先級替換): 3天
- **第四階段** (驗證清理): 1天

**總計**: 約6.5個工作天

---

*報告生成時間: 2025-01-11*  
*分析檔案總數: 28個CSS檔案*  
*發現硬編碼值: 123個間距相關值*