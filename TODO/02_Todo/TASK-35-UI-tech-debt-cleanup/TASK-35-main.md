# TASK-35: UI技術債全面清理計劃

- **Priority**: 🔴 CRITICAL
- **Estimated Time**: 2-3 weeks (80-120 hours)
- **Related Components**: 全系統 UI/UX 架構
- **Parent Task**: 無 (主任務)

---

### 🎯 Task Objective

基於深度技術債審查結果，進行全面的UI架構重構和技術債清理。解決725個硬編碼問題、統一CSS架構、改善可訪問性，並建立可維護的前端代碼基礎。

### ✅ Acceptance Criteria

- [ ] **Critical Issues**: 清理所有調試文件和完成遷移工作
- [ ] **CSS架構**: 統一樣式系統，消除雙重引入
- [ ] **硬編碼清理**: 轉換290個顏色值 + 435個尺寸值為設計令牌
- [ ] **JavaScript重構**: 分離main.js中的管理器類別
- [ ] **可訪問性**: 改善HTML語義化和ARIA支援
- [ ] **性能優化**: CSS/JS載入優化，減少重複規則
- [ ] **文檔建立**: 更新CLAUDE.md和設計系統指南
- [ ] **測試通過**: 所有功能正常，UI一致性驗證
- [ ] **代碼品質**: Ruff檢查通過，無硬編碼警告

### 📊 問題統計

**發現的技術債總量:**
- 硬編碼顏色值: 290個 `rgba()` 用法
- 硬編碼尺寸值: 435個 `px` 固定值
- 問題文件: 40+ CSS檔案、10+ JS檔案、10+ HTML模板
- 架構問題: 6個主要層面問題

### 📋 子任務分解

1. **TASK-35-01**: Critical Cleanup (🔴 高優先級) ✅ **完成**
   - 清理調試文件和完成遷移工作
   - 估計工時: 4-6小時 → 實際: 30分鐘 (效率12x)

2. **TASK-35-02**: CSS架構統一 (🔴 高優先級)
   - 解決雙重樣式系統並存問題
   - 估計工時: 8-12小時

3. **TASK-35-03**: 硬編碼顏色清理 (🟡 中優先級)
   - 轉換290個rgba顏色值為設計令牌
   - 估計工時: 16-24小時

4. **TASK-35-04**: 硬編碼尺寸清理 (🟡 中優先級)
   - 轉換435個px尺寸值為間距系統
   - 估計工時: 20-30小時

5. **TASK-35-05**: JavaScript重構 (🟡 中優先級)
   - 分離main.js中的管理器類別
   - 估計工時: 12-16小時

6. **TASK-35-06**: HTML可訪問性改善 (🟡 中優先級)
   - 改善語義化和ARIA支援
   - 估計工時: 8-12小時

7. **TASK-35-07**: 性能優化 (🟢 低優先級)
   - CSS/JS載入優化和合併
   - 估計工時: 12-16小時

### 🔄 執行順序

**Phase 1 - Critical Fixes (Week 1):**
1. TASK-35-01: Critical Cleanup ✅ **已完成** (2025-08-16)
2. TASK-35-02: CSS架構統一

**Phase 2 - 硬編碼清理 (Week 1-2):**
3. TASK-35-03: 硬編碼顏色清理
4. TASK-35-04: 硬編碼尺寸清理

**Phase 3 - 重構優化 (Week 2-3):**
5. TASK-35-05: JavaScript重構
6. TASK-35-06: HTML可訪問性改善
7. TASK-35-07: 性能優化

### 🎯 Success Metrics

- **技術債減少**: 從725個硬編碼問題降至0
- **載入性能**: CSS/JS載入時間減少30%
- **可維護性**: 代碼重複率降低50%
- **可訪問性**: WAVE工具檢查通過
- **開發效率**: 新功能開發時間減少25%

### ⚠️ Risk Assessment

**高風險:**
- 大規模重構可能引入回歸問題
- 硬編碼替換可能影響視覺效果

**緩解策略:**
- 分階段執行，每階段充分測試
- 建立視覺回歸測試
- 保留git分支以便回滾

### 📝 Execution Notes

**開始前準備:**
1. 創建feature分支: `feature/task-35-ui-tech-debt-cleanup`
2. 備份當前設計系統狀態
3. 準備測試環境和自動化工具
4. 與設計團隊確認視覺標準

**執行中注意:**
- 每個子任務完成後立即測試
- 保持與TASK-34硬編碼消除工作的一致性
- 定期提交防止丟失進度
- 記錄所有變更和決策理由

### 🔍 Review Comments (For Reviewer)

(審查者填寫)