⏺ 測試腳本修改需求總結

  是的，實現確認/刪除功能後，測試腳本需要以下修改：

  1. 新增測試文件 ✅

  已創建兩個新測試文件：
  - tests/integration/api/test_knowledge_confirmation.py -
  API層級測試
  - tests/e2e/test_confirmation_ui.py - UI端到端測試

  2. 需要修改的現有測試：

  tests/e2e/test_daily_practice_flow.py

  - 修改 save_mistake 調用邏輯
  - 添加對 pending_knowledge_points 的處理
  - 測試確認流程

  tests/functional/consistency/test_statistics.py

  - 更新統計數據驗證，考慮待確認狀態

  tests/fixtures/test_data_manager.py

  - 添加 add_knowledge_point_from_error 方法的模擬

  3. 測試覆蓋重點：

  API測試：
  - ✅ 批改返回待確認點而非自動保存
  - ✅ 確認API正確保存知識點
  - ✅ 批量確認功能
  - ✅ 空列表處理
  - ✅ 配置切換（自動/手動模式）

  UI測試：
  - ✅ 確認/刪除按鈕顯示
  - ✅ 單點確認/忽略
  - ✅ 批量操作
  - ✅ 視覺狀態反饋
  - ✅ 會話持久性

  4. 向後兼容測試：

  需要確保 AUTO_SAVE_KNOWLEDGE_POINTS 配置正確切換行為。

  5. 運行測試命令：

  # 運行新的確認功能測試
  pytest tests/integration/api/test_knowledge_confirmation.py -v

  # 運行UI測試（需要Playwright）
  pytest tests/e2e/test_confirmation_ui.py -v

  # 運行所有相關測試
  pytest tests/ -k "knowledge or confirmation or grade" -v

  主要修改集中在添加新測試覆蓋新功能，現有測試大部分可以保持不變，只
  需處理API響應格式變化。
